name: my-workflow
on: push
jobs:
  deploy:
      # needs: build
      name: deploy to github
      runs-on: ubuntu-latest
      steps:
         - uses: actions/checkout@v2
         - name: Set up JDK 17
           uses: actions/setup-java@v1
           with:
             java-version: '16'
             distribution: 'adopt'
             cache: maven
         - name: Build with Maven
           run: mvn package  # Building my war file with this
         - name: deploy to github artifacts
           uses: actions/upload-artifact@v2
           with: 
             name: my artifact
             path: target/*.war
         - name: deploy to Tomcat
           run: curl -v -u pradeep:pradeep /home/runner/work/spring3-mvc-maven-xml-hello-world/spring3-mvc-maven-xml-hello-world/target/spring3-mvc-maven-xml-hello-world-1.0-SNAPSHOT.war http://34.125.220.76:8080/manager/text/deploy?path=/spring-hello-war
          
